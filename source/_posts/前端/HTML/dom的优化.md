---
title: dom的优化
cover: false
categories:
  - 前端
  - 浏览器
abbrlink: 2a9f706b
date: 2020-11-23 18:40:03
updated:
tags:
---

加载和操作大量dom是很费性能的，因此我们需要对dom进行优化，可以从两个方面考虑：
- 减少dom的数量
- 提升操作大量dom时效率

## 减少dom数量
1. 使用伪元素，比如阴影的实现，清除浮动
2. 按需加载，减少不必要的渲染，比如视窗之外的内容就可以不用加载
3. 结构合理，语义化标签（废话，总之不要一股脑的使用div）

## 大量dom操作优化
大量的对dom进行访问和修改，会引起浏览器频繁的重排和重绘，我们需要避免这样的情况。
1. **缓存dom对象**，操作dom一般会首先去访问dom，我们可以考虑缓存dom对象，减少访问次数，比如循环之前，先获取缓存节点对象
2. **使用文档片段**，创建一个虚拟节点对象，操作该对象，最后一次性替换真实的dom节点
3. **复制节点对象**，操作该对象，最后一次性替换真实的dom节点
4. **使用`innerHtml`代替高频的`appendChild`**
5. **将任何导致重绘的操作放入`requestAnimationFrame`**
6. **使用虚拟dom**，作为纯js对象操作会很高效，使用diff算法批量修改dom结构